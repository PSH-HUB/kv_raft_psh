1. 理解 raftClerk（外部客户端交互代码）

    目标：raftClerk 是外部客户端与 KV 服务之间的交互接口，应该包括如何通过 RPC 请求进行操作，以及如何进行状态管理和重试等。

    重点：

        理解客户端如何发起请求，包括如何构造请求和处理响应。

        关注 RaftClerk 与服务器的通信如何进行，如如何处理重试机制、网络问题等。

        RaftClerk 作为一个外部接口，通常会封装与 Raft 集群的交互，重点理解该类的构造和请求方式。

    重写步骤：

        查找 raftClerk 中的 RPC 调用部分，搞懂每个函数是如何封装的。

        理解如何处理服务器的状态变更，并且了解如何对通信进行失败重试。

        重写时，可以为每个请求单独写一个功能测试，验证是否能正确与服务器通信。

2. 理解 raftCore（Raft 核心实现）

    目标：raftCore 是实现 Raft 协议核心逻辑的地方，包括节点之间的状态转换、日志复制、选举过程等。

    重点：

        理解 Raft 节点的生命周期（跟随者、候选人、领导者）和状态转换。

        掌握日志复制机制和持久化（例如，如何同步日志，如何通过 persister 持久化状态）。

        研究集群中的选举过程，包括节点如何选举领导者，以及领导者如何管理日志和提交状态机。

    重写步骤：

        先重写每个状态机的转变，包括从跟随者到候选人的转变、从候选人到领导人的转变。

        理解日志复制机制并重写日志的同步和提交过程。

        为每个过程编写单元测试，确保选举和日志同步的功能正常工作。

3. 理解 raftRpcPro（RPC 预处理接口）

    目标：raftRpcPro 负责定义和实现 RPC 的前处理部分，包括在客户端和服务器之间传递请求和响应。

    重点：

        理解客户端和服务器之间的 RPC 接口是如何定义的。

        了解请求的序列化与反序列化、消息传递的格式等。

        掌握服务端如何通过 RPC 接口处理客户端的请求。

    重写步骤：

        重写 RPC 接口的调用方式，确保请求被正确序列化和反序列化。

        理解如何定义新的 RPC 方法并在客户端和服务器端进行注册。

        测试每个 RPC 请求是否能成功传递，并在服务器端处理。

4. 理解 rpc（RPC 实现和配置管理）

    目标：rpc 主要是实现 RPC 服务的客户端和服务器端逻辑，同时管理配置文件。

    重点：

        掌握 RPC 客户端和服务器的网络通信实现（例如，如何建立连接、如何发送请求等）。

        理解如何使用 Protobuf 进行数据的序列化和反序列化。

        了解配置文件管理（如何加载、解析和使用配置）。

    重写步骤：

        研究如何通过配置文件加载服务器的配置信息（如 IP、端口等）。

        重写 RPC 客户端和服务器的实现，确保它们能够正确建立连接并交换消息。

        根据需要，修改配置加载部分，增强对不同配置格式的支持。